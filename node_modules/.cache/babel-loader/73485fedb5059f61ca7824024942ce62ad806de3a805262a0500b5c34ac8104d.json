{"ast":null,"code":"import api from '../utils/api';\nimport { userActionss } from '../reducer/userReducer';\nconst loginWithToken = () => async dispatch => {\n  try {\n    dispatch(userActionss.loginRequest);\n    const response = await api.get('/user/getToken');\n    console.log(response, 'response!!!');\n    if (response.status !== 200) throw new Error(response.error);\n    dispatch(userActionss.loginTokenSuccess(response.data));\n  } catch (error) {\n    dispatch(userActionss.loginWithTokenFail(error));\n  }\n};\nconst loginWithEmail = ({\n  email,\n  password\n}) => async dispatch => {\n  try {\n    dispatch(userActionss.loginRequest());\n    sessionStorage.removeItem(\"token\");\n    const res = await api.post('/auth/login', {\n      email,\n      password\n    });\n    if (res.status !== 200) throw new Error(res.error);\n    sessionStorage.setItem(\"token\", res.data.token);\n    dispatch(userActionss.loginSuccess(res.data));\n  } catch (error) {\n    dispatch(userActionss.loginFail(error.error));\n  }\n};\nconst logout = () => async dispatch => {\n  sessionStorage.removeItem('token');\n  dispatch(userActionss.logout());\n};\nconst registerUser = ({\n  email,\n  name,\n  season,\n  password,\n  level\n}, navigate) => async dispatch => {\n  try {\n    dispatch(userActionss.registerUserRequest());\n    const res = await api.post('/user', {\n      email,\n      name,\n      season: season ? season : 'normal',\n      password,\n      level\n    });\n    console.log(res, 'resres!!!!');\n    if (res.status !== 200) throw new Error(res.error);\n    dispatch(userActionss.registerUserSuccess());\n  } catch (error) {\n    dispatch(userActionss.registerUserFail(error.error));\n    navigate('/login');\n  }\n};\nexport const userActions = {\n  loginWithToken,\n  loginWithEmail,\n  logout,\n  registerUser\n};","map":{"version":3,"names":["api","userActionss","loginWithToken","dispatch","loginRequest","response","get","console","log","status","Error","error","loginTokenSuccess","data","loginWithTokenFail","loginWithEmail","email","password","sessionStorage","removeItem","res","post","setItem","token","loginSuccess","loginFail","logout","registerUser","name","season","level","navigate","registerUserRequest","registerUserSuccess","registerUserFail","userActions"],"sources":["/Users/jiylee/Desktop/Code/church/church_bible/churchBible/src/action/userAction.js"],"sourcesContent":["import api from '../utils/api'\nimport { userActionss } from '../reducer/userReducer'\n\nconst loginWithToken =()=> async (dispatch)=>{\n  try{\n    dispatch(userActionss.loginRequest)\n    const response = await api.get('/user/getToken')\n    console.log(response,'response!!!')\n    if(response.status !==200)throw new Error(response.error)\n    dispatch(userActionss.loginTokenSuccess(response.data))\n  }catch(error){\n    dispatch(userActionss.loginWithTokenFail(error))\n  }\n}\n\nconst loginWithEmail=({email,password})=>async (dispatch)=>{\n  try{\n    dispatch(userActionss.loginRequest())\n    sessionStorage.removeItem(\"token\");\n    const res = await api.post('/auth/login',{email,password});\n    if(res.status !==200)throw new Error(res.error);\n    sessionStorage.setItem(\"token\",res.data.token)\n    dispatch(userActionss.loginSuccess(res.data))\n  }catch(error){\n    dispatch(userActionss.loginFail(error.error))\n  }\n}\n\nconst logout =()=> async (dispatch)=>{\n  sessionStorage.removeItem('token')\n  dispatch(userActionss.logout())\n}\n\nconst registerUser =\n({email,name,season,password,level},navigate)=> async (dispatch)=>{\n  try{\n    dispatch(userActionss.registerUserRequest())\n    const res = await api.post('/user',{email,name,season:season?season:'normal',password,level})\n    console.log(res,'resres!!!!')\n    if(res.status !== 200)throw new Error(res.error)\n    dispatch(userActionss.registerUserSuccess())\n  }catch(error){\n    dispatch(userActionss.registerUserFail(error.error))\n    navigate('/login')\n  }\n\n}\n\nexport const userActions = {\n  loginWithToken,\n  loginWithEmail,\n  logout,\n  registerUser,\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}